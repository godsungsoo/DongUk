#query.properties
#bankProject BankDao query
#encoding=utf-8
newInsert=insert all into bankmanager values (SEQ_NO.NEXTVAL, ?, ?, ?) into account  values ('02-'||SEQ_ACC.NEXTVAL, DEFAULT) into transaction values (SEQ_NO.CURRVAL,'02-'||SEQ_ACC.CURRVAL,DEFAULT,1,' ',?,DEFAULT,?) select * from dual
insert=insert all into account  values ('02-'||SEQ_ACC.NEXTVAL, DEFAULT) into transaction values ((select user_no from bankmanager where user_name = ? and user_ssn = ?), '02-'||SEQ_ACC.CURRVAL,DEFAULT,1,' ',?,DEFAULT,?) select * from dual
selectAll=select user_no, user_name, account_no, balance, open_date, trans_date, phone from bankmanager join transaction using (user_no) join account using (account_no)
selectAccount=select user_no, account_no, trans_date, type_no, trans_content, deposit, withdraw, balance from transaction where account_no = ?
selectName=SELECT USER_NO, USER_NAME, ACCOUNT_NO, BALANCE, OPEN_DATE, TRANS_DATE, PHONE FROM BANKMANAGER JOIN TRANSACTION USING (USER_NO) JOIN ACCOUNT USING (ACCOUNT_NO) WHERE USER_NAME like ?
update=update bankmanager set phone = ? where user_name = ? and user_ssn = ?
delete=delete (select * from account where account_no = (select distinct account_no from transaction join bankmanager using(user_no) where user_name = ? and user_ssn = ? and account_no = ?))
insertDeposit=insert into transaction values((select distinct user_no from transaction where account_no = ?),?,default,1,' ',?,0,?+(select balance from (select balance, trans_date, row_number() over(order by trans_date desc) as rank from transaction where account_no = ?) where rank = 1))
insertWithdraw=insert into transaction values((select distinct user_no from transaction where account_no = ?),?,default,2,' ',0,?,(select balance from (select balance, trans_date, row_number() over(order by trans_date desc) as rank from transaction where account_no = ?) where rank = 1) -? )
insertTransaction=insert all into transaction values((select distinct user_no from transaction where account_no = ?),?,default,2,(select distinct user_name from transaction join bankmanager using (user_no) where account_no = ?),0,?,(select balance from (select balance, trans_date, row_number() over(order by trans_date desc) as rank from transaction where account_no = ? )where rank = 1) - ?) into transaction values((select distinct user_no from transaction where account_no = ?), ?,default,1,(select distinct user_name from transaction join bankmanager using (user_no) where account_no = ?), ?,0 ,? + (select balance from (select balance, trans_date, row_number() over(order by trans_date desc) as rank from transaction where account_no = ?) where rank = 1)) select * from dual
